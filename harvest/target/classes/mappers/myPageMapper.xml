<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.itwillbs.mappers.myPageMapper">	<!-- 파일위치(패키지명)을 가리키는게 아니라 파일이름임 -->
  
  <insert id="insertUser">
<!--   	#{} : memberDTO에 있는 멤버변수가 자동으로 값이 삽입됨  -->
<!--   	insert into USER_TB(idx,name,id,pass,profile,phone,prefer,unregist,unregDate,EVENT_ALR)  DB의 컬럼명 -->
<!--   	values(#{idx},#{name},#{id},#{pass},#{profile},#{phone},${prefer},${unregist},${unregDate},${EVENT_ALR}) DTO의 멤버변수 이름 -->
  </insert>
  
  <select id="userCheck" resultType="com.itwillbs.domain.UserDTO">	<!-- resultType : DB에서 select한 결과를 MemberDTO타입의 resultType변수에 저장 -->
  	select * from USER_TB 
  	where id=#{id} and pass=#{pass}		<!-- #{변수명} : 멤버DTO의 변수명 -->
  </select>
  
  <select id="getUser" resultType="com.itwillbs.domain.UserDTO">
  	select * from user_tb
  	where id=#{id}
  </select>
  
<!--   <update id="updateUser"> -->
<!--    update user_tb -->
<!--    set	idx = #{idx} -->
<!--       , pass = #{pass} -->
<!--       , name = #{name} -->
<!--       , profile = #{profile} -->
<!--       , phone = #{phone} -->
<!--       , prefer = #{prefer} -->
<!--    where id=#{id} -->
<!--   </update> -->

  <update id="updateUser" parameterType="HashMap">
   update user_tb
<!--    <set> -->
   <trim prefix="SET" suffixOverrides=",">
   
   	id=#{id}
   <if test="pass!=null">
      , pass = #{pass3}
      </if>
         <if test="name!=null">
      , name = #{name}
      </if>
         <if test="profile!=null">
      , profile = #{profile}
      </if>
         <if test="phone!=null">
      , phone = #{phone}
      </if>
         <if test="prefer!=null">
      , prefer = #{prefer}
      </if>
   </trim>
   
<!--    	</set> -->
   where id=#{id}
  </update>
  
  <delete id="deleteUser">
   delete from USER_TB
   where id=#{id}
  </delete>
  
  <select id="getUserList" resultType="com.itwillbs.domain.UserDTO"> <!-- MemberDAOImpl.java 파일에서 selectList안에 담길 파일형식인 MemberDTO를 resultType에 담아야함 -->
   select * from USER_TB;
  
  </select>
  
</mapper>